!function(t,e){"use strict";"function"==typeof define&&define.amd?define("smartdate",[],e):"object"==typeof exports?module.exports=e():t.smartdate=e()}(this,function(){"use strict";var t={version:"0.9.0",config:{locale:"en",tagName:"span",className:"smartdate",addTitle:!0,updateInterval:5e3,fullMonthNames:!1,capitalize:!1,mode:"auto"}},e=t.daysBetween=function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=864e5,r=a.getTime()-n.getTime(),i=r/o;return Math.floor(i)},n=t.pad=function(t){return 10>t?"0"+t:t};return t.now=function(){return new Date},t.locale={en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],date:function(t,e){var n=e?this.months:this.monthsShort;return n[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()},time:function(t){var e=t.getHours(),a=t.getMinutes(),o=e>=12?"pm":"am";return e%=12,e=e?e:12,a=n(a),e+":"+a+" "+o},datetime:function(t,e){return this.date(t,e)+" at "+this.time(t)},past:function(n,a){var o=t.now(),r=(o.getTime()-n.getTime())/1e3;return 60>r?"less than a minute ago":3600>r?Math.floor(r/60)+" min ago":0===e(o,n)?"today at "+this.time(n):-1===e(o,n)?"yesterday at "+this.time(n):this.date(n,a)},future:function(n,a){var o=t.now(),r=(n.getTime()-o.getTime())/1e3;return 60>r?"in less than a minute":3600>r?"in "+Math.floor(r/60)+" min":0===e(o,n)?"today at "+this.time(n):1===e(o,n)?"tomorrow at "+this.time(n):this.date(n,a)}},ru:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],monthsShort:["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"],date:function(t,e){var n=e?this.months:this.monthsShort;return t.getDate()+" "+n[t.getMonth()]+" "+t.getFullYear()},time:function(t){return n(t.getHours())+":"+n(t.getMinutes())},datetime:function(t,e){return this.date(t,e)+" в "+this.time(t)},past:function(n,a){var o=t.now(),r=(o.getTime()-n.getTime())/1e3;return 60>r?"менее 1 мин назад":3600>r?Math.floor(r/60)+" мин назад":0===e(o,n)?"сегодня в "+this.time(n):-1===e(o,n)?"вчера в "+this.time(n):this.date(n,a)},future:function(n,a){var o=t.now(),r=(n.getTime()-o.getTime())/1e3;return 60>r?"в течение минуты":3600>r?"через "+Math.floor(r/60)+" мин":0===e(o,n)?"сегодня в "+this.time(n):1===e(o,n)?"завтра в "+this.time(n):this.date(n,a)}}},t.getLocale=function(e){return e=e||t.config.locale,"string"==typeof e&&(e=e.toLowerCase(),t.locale.hasOwnProperty(e))?t.locale[e]:t.locale.en},t.getOptions=function(e){e=e||{};for(var n in t.config)t.config.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t.config[n]);return e},t.auto=function(e,n,a){return n.getTime()>t.now().getTime()?e.future(n,a):e.past(n,a)},t.format=function(e,n){if(!(e instanceof Date)){if("string"==typeof e&&(e=Number(e)),"number"!=typeof e||isNaN(e))return null;e=new Date(1e3*e)}n=t.getOptions(n);var a,o=t.getLocale(n.locale);return a=n.mode&&"function"==typeof o[n.mode]?o[n.mode](e,n.fullMonthNames):t.auto(o,e,n.fullMonthNames),n.capitalize&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a},t.render=function(){for(var e,n,a,o,r,i=t.config,u=i.tagName+"."+i.className,s=document.querySelectorAll(u),m=0,c=s.length;c>m;m++){n=s[m],r=+n.getAttribute("data-timestamp"),a={};for(var f in i)i.hasOwnProperty(f)&&n.hasAttribute("data-"+f)&&(o=n.getAttribute("data-"+f).toLowerCase(),"boolean"==typeof i[f]&&(o="true"===o),a[f]=o);a=t.getOptions(a),e=new Date(1e3*r),n.innerHTML=t.format(e,a),a.addTitle&&n.setAttribute("title",e.toLocaleString())}},t.setup=function(e){t.config=t.getOptions(e)},t.init=function(e){t.setup(e),t.render(),t.config.updateInterval&&window.setInterval(t.render,t.config.updateInterval)},t.tag=function(e,n){var a,o;return e instanceof Date?o=Math.round(e.getTime()/1e3):(o=e,e=new Date(1e3*o)),a=document.createElement(t.config.tagName),a.className=t.config.className,a.setAttribute("data-timestamp",o),n=t.getOptions(n),a.innerHTML=t.format(e,n),n.addTitle&&a.setAttribute("title",e.toLocaleString()),a},t});